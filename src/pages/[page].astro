---
import { getCollection } from "astro:content";
import { render } from "astro:content";
import PageLayout from "@/layouts/PageLayout.astro";

export async function getStaticPaths() {
  // Exclude pages that have their own dedicated routes.
  const RESERVED = ["home"];

  const pages = await getCollection("pages", ({ id, data }) =>
    !data.draft && !RESERVED.includes(id)
  );
  return pages.map((entry) => ({
    params: { page: entry.id },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await render(entry);
---

<PageLayout {entry}>
  <Content />
</PageLayout>